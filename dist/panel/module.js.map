{"version":3,"sources":["../../src/panel/module.js"],"names":["getGraph","data","graph","jsbayes","newGraph","nodes","map","status","node","states","state","name","addNode","id","graphNode","parents","forEach","addParent","parent","cpt","length","parseFloat","num","push","entry","setCpt","sample","PanelCtrl","ExampleAppPanelCtrl","$scope","$injector","template","$","document","ready","getJSON","g","jsbayesviz","fromGraph","draw","width","height","samples"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,WAASA,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,QAAIC,QAAQC,QAAQC,QAAR,EAAZ;;AAEA;AACAH,SAAKI,KAAL,CAAWC,GAAX,CAAe,gBAAQ;AACrB,UAAIC,SAASC,KAAKC,MAAL,CAAYH,GAAZ,CAAgB;AAAA,eAASI,MAAMC,IAAf;AAAA,OAAhB,CAAb;AACAT,YAAMU,OAAN,CAAcJ,KAAKK,EAAnB,EAAuBN,MAAvB;AACD,KAHD;;AAKA;AACAN,SAAKI,KAAL,CAAWC,GAAX,CAAe,gBAAQ;AACrB,UAAIQ,YAAYZ,MAAMM,IAAN,CAAWA,KAAKK,EAAhB,CAAhB;;AAEA;AACAL,WAAKO,OAAL,CAAaC,OAAb,CAAqB;AAAA,eAAUF,UAAUG,SAAV,CAAoBf,MAAMM,IAAN,CAAWU,MAAX,CAApB,CAAV;AAAA,OAArB;;AAEA;AACA,UAAIC,MAAM,EAAV;AACA,UAAGX,KAAKW,GAAL,CAASC,MAAT,KAAoB,CAAvB,EAA0B;AACxBD,cAAMX,KAAKW,GAAL,CAAS,CAAT,EAAYb,GAAZ,CAAgB;AAAA,iBAAOe,WAAWC,GAAX,CAAP;AAAA,SAAhB,CAAN;AACD,OAFD,MAEO;AACLd,aAAKW,GAAL,CAASb,GAAT,CAAa;AAAA,iBAASa,IAAII,IAAJ,CAASC,MAAMlB,GAAN,CAAU;AAAA,mBAAOe,WAAWC,GAAX,CAAP;AAAA,WAAV,CAAT,CAAT;AAAA,SAAb;AACD;;AAEDR,gBAAUW,MAAV,CAAiBN,GAAjB;AACD,KAfD;;AAiBAjB,UAAMwB,MAAN,CAAa,KAAb;;AAEA,WAAOxB,KAAP;AACD;;;;AAzCOyB,e,kBAAAA,S;;;2BAGFC,mB;;;AAEJ,qCAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,2IACvBD,MADuB,EACfC,SADe;AAE9B;;;QAJ+BH,S;;AAwClCC,0BAAoBG,QAApB,GAA+B,sBAA/B;;AAEAC,QAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AAC3BF,UAAEG,OAAF,CAAU,eAAV,EAA2B,UAAUlC,IAAV,EAAgB;AACzC,cAAIC,QAAQF,SAASC,IAAT,CAAZ;;AAEA,cAAImC,IAAIC,WAAWC,SAAX,CAAqBpC,KAArB,CAAR;;AAEAmC,qBAAWE,IAAX,CAAgB;AACd1B,gBAAI,MADU;AAEd2B,mBAAO,GAFO;AAGdC,oBAAQ,GAHM;AAIdvC,mBAAOkC,CAJO;AAKdM,qBAAS;AALK,WAAhB;AAOD,SAZD;AAaD,OAdD;;2BAiBEd,mB","file":"module.js","sourcesContent":["import {PanelCtrl} from  'app/plugins/sdk';\nimport '../css/example-app.css!'\n\nclass ExampleAppPanelCtrl extends PanelCtrl {\n\n  constructor($scope, $injector) {\n    super($scope, $injector);\n  }\n\n}\n\nfunction getGraph(data) {\n  let graph = jsbayes.newGraph();\n\n  //creating the nodes\n  data.nodes.map(node => {\n    let status = node.states.map(state => state.name);\n    graph.addNode(node.id, status);\n  });\n\n  //adding data to nodes\n  data.nodes.map(node => {\n    let graphNode = graph.node(node.id);\n\n    //setting parents\n    node.parents.forEach(parent => graphNode.addParent(graph.node(parent)));\n\n    //setting cpt\n    let cpt = [];\n    if(node.cpt.length === 1) {\n      cpt = node.cpt[0].map(num => parseFloat(num));\n    } else {\n      node.cpt.map(entry => cpt.push(entry.map(num => parseFloat(num))));\n    }\n\n    graphNode.setCpt(cpt);\n  });\n\n  graph.sample(20000);\n\n  return graph;\n}\n\nExampleAppPanelCtrl.template = '<svg id=\"bbn\"></svg>';\n\n$(document).ready(function() {\n  $.getJSON('exampleA.json', function (data) {\n    let graph = getGraph(data);\n\n    let g = jsbayesviz.fromGraph(graph);\n\n    jsbayesviz.draw({\n      id: '#bbn',\n      width: 800,\n      height: 800,\n      graph: g,\n      samples: 15000\n    });\n  });\n});\n\nexport {\n  ExampleAppPanelCtrl as PanelCtrl\n};\n\n"]}